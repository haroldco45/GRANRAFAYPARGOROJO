<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gran Rafa - El Pargo Rojo</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { background-color: #f8fafc; font-family: sans-serif; }
        .ocean-header { background: linear-gradient(135deg, #1e40af 0%, #0369a1 100%); }
        .hidden-section { display: none; }
        .badge-cantidad { 
            background-color: #ef4444; color: white; border-radius: 999px; 
            padding: 2px 10px; font-size: 0.85rem; font-weight: bold;
            margin-left: 10px; box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        .categoria-title { background-color: #e0f2fe; color: #0369a1; padding: 10px; border-radius: 8px; font-weight: bold; margin-top: 20px; border-left: 5px solid #0369a1; text-transform: uppercase; font-size: 0.9rem; }
    </style>
</head>
<body class="pb-40">

    <header class="ocean-header p-4 text-center shadow-md">
        <img src="gran-rafa.PNG" alt="Logo Gran Rafa" class="mx-auto h-32 w-auto mb-2 drop-shadow-lg">
        <p class="text-xs text-sky-100 opacity-80 uppercase tracking-widest text-center">C.C. CAUCACENTRO LOCAL 103-104</p>
    </header>

    <main class="p-4 max-w-md mx-auto space-y-4">
        
        <section id="section-datos" class="bg-white p-4 rounded-xl shadow-sm border border-sky-100">
            <div class="flex justify-between items-center mb-3">
                <h2 class="text-blue-900 font-bold">Tus Datos</h2>
                <button id="btn-editar" onclick="habilitarEdicion()" class="text-xs bg-yellow-400 px-3 py-1 rounded-full text-black font-bold hidden">EDITAR DATOS</button>
            </div>
            <div id="inputs-datos" class="space-y-2">
                <input type="text" id="nombre" placeholder="Nombre completo" class="w-full p-2 border rounded-lg focus:outline-blue-500">
                <input type="text" id="direccion" placeholder="Direcci√≥n de entrega" class="w-full p-2 border rounded-lg focus:outline-blue-500">
                <input type="email" id="correo" placeholder="Correo electr√≥nico" class="w-full p-2 border rounded-lg focus:outline-blue-500">
                <button onclick="guardarDatos()" class="w-full bg-blue-600 text-white py-2 rounded-lg font-bold shadow-md">CONFIRMAR MIS DATOS</button>
            </div>
            <div id="vista-fija" class="hidden p-2 bg-blue-50 rounded-lg text-sm text-blue-800 border border-blue-100 italic">
                <p id="resumen-cliente"></p>
            </div>
        </section>

        <section class="bg-white p-4 rounded-xl shadow-sm border border-sky-100">
            <h2 class="text-blue-900 font-bold mb-2">Medio de Pago</h2>
            <select id="medio-pago" class="w-full p-2 border rounded-lg bg-white">
                <option value="Efectivo">Efectivo</option>
                <option value="Transferencia Nequi/Daviplata">Transferencia Nequi / Daviplata</option>
                <option value="Datafono">Dat√°fono (Llevamos el equipo)</option>
            </select>
        </section>

        <div id="menu-dinamico"></div>

        <section class="bg-white p-4 rounded-xl shadow-sm border border-sky-100">
            <h2 class="text-blue-900 font-bold mb-2">Observaciones Especiales</h2>
            <textarea id="observaciones" rows="2" placeholder="Ej: Traer cambio de $50 mil, sin cebolla..." class="w-full p-2 border rounded-lg focus:outline-blue-500"></textarea>
        </section>

        <div class="text-center py-6">
            <p class="text-sm text-gray-400 font-medium italic">App hecha por <span class="text-blue-600 font-bold">Vibras Positivas</span></p>
        </div>
    </main>

    <footer class="fixed bottom-0 w-full bg-white border-t p-4 shadow-[0_-5px_15px_rgba(0,0,0,0.1)] z-50">
        <div class="flex justify-between items-center max-w-md mx-auto">
            <div>
                <p class="text-gray-400 text-xs font-bold uppercase">Total:</p>
                <p id="total" class="text-3xl font-black text-blue-900">$0</p>
            </div>
            <button onclick="generarPedido()" class="bg-green-600 text-white px-8 py-3 rounded-2xl font-black text-xl hover:bg-green-700 shadow-md">PEDIR YA</button>
        </div>
    </footer>

    <script>
        let carrito = {};
        let sumaTotal = 0;

        const categorias = {
            "üåÖ DESAYUNOS": [
                ["Calentado con Huevos (Patac√≥n)", 17500], ["Calentado con Huevos (Arepa)", 15500],
                ["Calentado Res/Cerdo/Pechuga (Patac√≥n)", 19500], ["Calentado Res/Cerdo/Pechuga (Arepa)", 18000],
                ["Huevos Rancheros (Patac√≥n)", 19500], ["Huevos Rancheros (Arepa)", 17500],
                ["Huevos Revueltos (Patac√≥n)", 16500], ["Huevos Revueltos (Arepa)", 13000],
                ["Huevos a la Cacerola (Patac√≥n)", 14500], ["Huevos a la Cacerola (Arepa)", 12500],
                ["Carne al Bistec (Papa/Yuca)", 19500], ["Calentado con Chicharr√≥n", 20500],
                ["Omelette (Jam√≥n, Molida, Pollo o Tocineta)", 19500]
            ],
            "ü•ò ENTRADAS": [
                ["Crema de Cebolla", 15000], ["Crema de Pollo", 15000], ["Crema de Champi√±ones", 16000],
                ["Crema de Camar√≥n", 24000], ["Crema de Camar√≥n Gran Rafa", 25000], ["Patac√≥n con Suero", 16000],
                ["Patac√≥n con Hogao", 16000], ["Yuca Frita con Suero", 16000], ["Yuca Frita con Hogao", 16000],
                ["Platanitos Chips con Suero", 16000], ["Platanitos Chips con Hogao", 18000]
            ],
            "üêü PESCADOS Y MARISCOS": [
                ["Cazuela de Mariscos", 52000], ["Cazuela de Mariscos Gratinada", 58000], ["Filete Robalo/Pargo Plancha", 50000],
                ["Filete Robalo/Pargo Brasa", 50000], ["Filete Robalo/Pargo Milanesa", 55000], ["Filete Robalo/Pargo Gratinado", 65000],
                ["Pulpo al Ajillo", 52000], ["Langostino Brasa/Ajillo/Milanesa", 62000], ["Langostino 7 Mares Submarino", 80000],
                ["Salm√≥n Plancha/Ajillo", 50000], ["Salm√≥n Salsa Champi√±ones", 62000], ["Camar√≥n Ajillo/Gratinado", 70000],
                ["Ensopado de Bagre", 52000], ["Bagre Plancha/Brasa/Milanesa", 44000], ["Bagre Medall√≥n Frito", 42000]
            ],
            "ü•© ASADOS Y CORTES": [
                ["Carne Gran Rafa de Res", 33000], ["Punta de Anca Mediana", 42000], ["Punta de Anca Especial", 45000],
                ["Baby Beef (400gr)", 44000], ["Solomito Hawaiano/Pimienta", 40000], ["Fillet Mignon", 45000],
                ["Churrasco Argentino", 42000], ["Churrasco a la Mexicana", 48000], ["Sobrebarriga a la Brasa", 42000],
                ["Lengua Brasa/Criolla/Champi√±ones", 40000]
            ],
            "üê∑ CERDO Y POLLO": [
                ["Gran Rafa de Cerdo", 30000], ["Ca√±√≥n de Cerdo", 38000], ["Super Costilla BBQ", 40000],
                ["Pechuga a la Brasa Deshuesada", 34000], ["Pollo a la Milanesa", 38000], ["Pollo Hawaiano", 40000],
                ["Pollo Gratinado Tres Quesos", 43000]
            ],
            "üèîÔ∏è COMIDA MONTA√ëERA": [
                ["Bandeja Paisa", 42000], ["Cazuela de Fr√≠jol", 33000], ["Arriero", 35000],
                ["Cazuela Gran Rafa", 36000], ["Chicharronada", 40000]
            ],
            "üçö ARROCES Y PASTAS": [
                ["Arroz con Pollo/Cerdo", 35000], ["Arroz Oriental/Cubano", 40000], ["Arroz a la Marinera", 48000],
                ["Pasta Napolitana/Bolo√±esa", 26000], ["Pasta Pollo/Carbonara", 32000], ["Lasa√±a Res/Pollo", 28000]
            ],
            "üçü MEN√ö INFANTIL Y R√ÅPIDA": [
                ["Nuggets de Pollo", 24000], ["Baby Beef Junior", 24000], ["Salchipapas", 17000],
                ["SalchiPollos/Carne/Ranchera", 20000], ["Hamburguesa Sencilla", 22000], ["Hamburguesa Doble", 25000],
                ["Hamburguesa de la Casa", 30000]
            ],
            "‚òï ADICIONALES Y BEBIDAS": [
                ["Porci√≥n Patacones x4", 4000], ["Arepa Tela", 1500], ["Queso Coste√±o/Mozarella", 4000],
                ["Chocolate/Cafe con Leche", 4500], ["Milo Fr√≠o", 10000], ["Tinto/Arom√°tica", 1500]
            ]
        };

        function renderizarMenu() {
            let menuHTML = "";
            for (let cat in categorias) {
                menuHTML += `<div class="categoria-title">${cat}</div><div class="space-y-3 mt-3">`;
                categorias[cat].forEach((item, index) => {
                    const idBadge = `badge-${cat.replace(/[^a-zA-Z0-9]/g, '')}-${index}`;
                    menuHTML += `
                        <div class="bg-white p-4 rounded-xl shadow-sm flex justify-between items-center border-l-4 border-orange-500">
                            <div class="flex-1">
                                <div class="flex items-center">
                                    <h3 class="font-bold text-gray-800 text-xs">${item[0]}</h3>
                                    <span id="${idBadge}" class="badge-cantidad hidden">0</span>
                                </div>
                                <p class="text-blue-600 font-bold text-sm">$${item[1].toLocaleString()}</p>
                            </div>
                            <div class="flex items-center gap-2">
                                <button onclick="restarDelCarrito('${item[0]}', ${item[1]}, '${idBadge}')" class="bg-red-100 text-red-600 w-8 h-8 rounded-full font-black shadow-sm">-</button>
                                <button onclick="sumarAlCarrito('${item[0]}', ${item[1]}, '${idBadge}')" class="bg-blue-600 text-white w-10 h-10 rounded-full font-bold shadow-md">+</button>
                            </div>
                        </div>`;
                });
                menuHTML += `</div>`;
            }
            document.getElementById('menu-dinamico').innerHTML = menuHTML;
        }

        function sumarAlCarrito(nombre, precio, idBadge) {
            if (!carrito[nombre]) { carrito[nombre] = { cantidad: 1, precio: precio }; }
            else { carrito[nombre].cantidad += 1; }
            actualizarInterfaz(nombre, idBadge, precio, true);
        }

        function restarDelCarrito(nombre, precio, idBadge) {
            if (carrito[nombre] && carrito[nombre].cantidad > 0) {
                carrito[nombre].cantidad -= 1;
                actualizarInterfaz(nombre, idBadge, precio, false);
                if (carrito[nombre].cantidad === 0) { delete carrito[nombre]; }
            }
        }

        function actualizarInterfaz(nombre, idBadge, precio, esSuma) {
            const badge = document.getElementById(idBadge);
            const cant = carrito[nombre] ? carrito[nombre].cantidad : 0;
            badge.innerText = cant;
            badge.classList.toggle('hidden', cant === 0);
            sumaTotal = esSuma ? sumaTotal + precio : sumaTotal - precio;
            document.getElementById('total').innerText = '$' + Math.max(0, sumaTotal).toLocaleString('es-CO');
        }

        function guardarDatos() {
            const n = document.getElementById('nombre').value;
            const d = document.getElementById('direccion').value;
            const c = document.getElementById('correo').value;
            if(n && d && c) {
                document.getElementById('inputs-datos').classList.add('hidden-section');
                document.getElementById('vista-fija').classList.remove('hidden-section');
                document.getElementById('btn-editar').classList.remove('hidden');
                document.getElementById('resumen-cliente').innerText = `Pedido para: ${n} | ${d}`;
            } else { alert("Por favor completa tus datos."); }
        }

        function habilitarEdicion() {
            document.getElementById('inputs-datos').classList.remove('hidden-section');
            document.getElementById('vista-fija').classList.add('hidden-section');
            document.getElementById('btn-editar').classList.add('hidden');
        }

        function generarPedido() {
            const n = document.getElementById('nombre').value;
            const d = document.getElementById('direccion').value;
            const p = document.getElementById('medio-pago').value;
            const o = document.getElementById('observaciones').value;

            if (!n || !d || Object.keys(carrito).length === 0) {
                alert("Verifica tus datos y productos.");
                return;
            }

            let detalle = "";
            for (const item in carrito) { detalle += `‚úÖ ${carrito[item].cantidad}x ${item}\n`; }

            const mensaje = `*PEDIDO GRAN RAFA*\n\n` +
                            `üë§ *Cliente:* ${n}\n` +
                            `üìç *Direcci√≥n:* ${d}\n` +
                            `üí≥ *Pago:* ${p}\n\n` +
                            `üç§ *DETALLE:* \n${detalle}\n` +
                            `üí∞ *TOTAL:* $${sumaTotal.toLocaleString('es-CO')}\n` +
                            `üìù *Nota:* ${o}\n\n` +
                            `_App Vibras Positivas_`;

            window.open(`https://api.whatsapp.com/send?phone=573207848287&text=${encodeURIComponent(mensaje)}`, '_blank');
        }

        renderizarMenu();
    </script>
</body>
</html>
