<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gran Rafa - El Pargo Rojo</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { background-color: #f8fafc; font-family: sans-serif; }
        .ocean-header { background: linear-gradient(135deg, #1e40af 0%, #0369a1 100%); }
        .vibras-tag { color: #0369a1; font-weight: bold; font-style: italic; }
        .hidden-section { display: none; }
        /* Burbuja de cantidad resaltada */
        .badge-cantidad { 
            background-color: #ef4444; 
            color: white; 
            border-radius: 999px; 
            padding: 2px 10px; 
            font-size: 0.85rem; 
            font-weight: bold;
            margin-left: 10px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
    </style>
</head>
<body class="pb-32">

    <header class="ocean-header p-4 text-center shadow-md">
        <img src="gran-rafa.PNG" alt="Logo Gran Rafa" class="mx-auto h-32 w-auto mb-2 drop-shadow-lg">
        <p class="text-xs text-sky-100 opacity-80 uppercase tracking-widest">C.C. CAUCACENTRO LOCAL 103-104</p>
    </header>

    <main class="p-4 space-y-6 max-w-md mx-auto">
        
        <section id="section-datos" class="bg-white p-4 rounded-xl shadow-sm border border-sky-100">
            <div class="flex justify-between items-center mb-3 border-b pb-1">
                <h2 class="text-blue-900 font-bold">Tus Datos</h2>
                <button id="btn-editar" onclick="habilitarEdicion()" class="text-xs bg-yellow-100 px-3 py-1 rounded-full text-yellow-700 font-bold hidden">EDITAR DATOS</button>
            </div>
            
            <div id="inputs-datos" class="space-y-3">
                <input type="text" id="nombre" placeholder="Nombre completo" class="w-full p-3 border rounded-lg focus:outline-blue-500 bg-gray-50">
                <input type="text" id="direccion" placeholder="Direcci√≥n de entrega" class="w-full p-3 border rounded-lg focus:outline-blue-500 bg-gray-50">
                <input type="email" id="correo" placeholder="Correo electr√≥nico" class="w-full p-3 border rounded-lg focus:outline-blue-500 bg-gray-50">
                <button onclick="guardarDatos()" class="w-full bg-blue-600 text-white py-3 rounded-lg font-bold shadow-md">CONFIRMAR MIS DATOS</button>
            </div>
            <div id="vista-fija" class="hidden p-2 bg-blue-50 rounded-lg text-sm text-blue-800 border border-blue-100">
                <p id="resumen-cliente" class="font-medium"></p>
            </div>
        </section>

        <section class="bg-white p-4 rounded-xl shadow-sm border border-sky-100">
            <h2 class="text-blue-900 font-bold mb-3 border-b pb-1">Medio de Pago</h2>
            <select id="medio-pago" class="w-full p-3 border rounded-lg focus:outline-blue-500 bg-white font-medium text-gray-700">
                <option value="Efectivo">Efectivo</option>
                <option value="Transferencia Nequi/Daviplata">Transferencia Nequi/Daviplata</option>
                <option value="Datafono">Dat√°fono</option>
            </select>
        </section>

        <section>
            <h2 class="text-xl font-bold text-gray-800 mb-4 text-center">Nuestro Men√∫</h2>
            <div id="menu" class="space-y-4">
                
                <div class="bg-white p-4 rounded-xl shadow-sm flex justify-between items-center border-l-8 border-orange-500">
                    <div class="flex-1">
                        <div class="flex items-center">
                            <h3 class="font-bold text-gray-800 text-lg">Ceviche de Camar√≥n</h3>
                            <span id="cant-ceviche" class="badge-cantidad hidden">0</span>
                        </div>
                        <p class="text-blue-600 font-black text-xl">$25.000</p>
                    </div>
                    <button onclick="sumarAlCarrito('Ceviche de Camar√≥n', 25000, 'cant-ceviche')" class="bg-blue-600 text-white w-12 h-12 rounded-full font-bold shadow-lg text-2xl active:scale-90 transition">+</button>
                </div>

                <div class="bg-white p-4 rounded-xl shadow-sm flex justify-between items-center border-l-8 border-orange-500">
                    <div class="flex-1">
                        <div class="flex items-center">
                            <h3 class="font-bold text-gray-800 text-lg">Pargo Rojo Frito</h3>
                            <span id="cant-pargo" class="badge-cantidad hidden">0</span>
                        </div>
                        <p class="text-blue-600 font-black text-xl">$45.000</p>
                    </div>
                    <button onclick="sumarAlCarrito('Pargo Rojo Frito', 45000, 'cant-pargo')" class="bg-blue-600 text-white w-12 h-12 rounded-full font-bold shadow-lg text-2xl active:scale-90 transition">+</button>
                </div>

            </div>
        </section>

        <section class="bg-white p-4 rounded-xl shadow-sm border border-sky-100">
            <h2 class="text-blue-900 font-bold mb-2">Observaciones del Pedido</h2>
            <textarea id="observaciones" rows="2" placeholder="Ej: Sin cebolla, picante aparte..." class="w-full p-3 border rounded-lg focus:outline-blue-500 bg-gray-50"></textarea>
        </section>

        <div class="text-center py-6">
            <p class="text-sm text-gray-400 italic font-medium">App hecha por <span class="vibras-tag">Vibras Positivas</span></p>
        </div>
    </main>

    <footer class="fixed bottom-0 w-full bg-white border-t p-4 shadow-[0_-8px_20px_rgba(0,0,0,0.15)] z-50">
        <div class="flex justify-between items-center max-w-md mx-auto">
            <div>
                <p class="text-gray-400 text-xs font-bold uppercase">Total a Pagar:</p>
                <p id="total" class="text-3xl font-black text-blue-900 leading-none">$0</p>
            </div>
            <button onclick="generarPedido()" class="bg-green-600 text-white px-10 py-4 rounded-2xl font-black text-xl hover:bg-green-700 shadow-xl active:scale-95 transition">
                PEDIR YA
            </button>
        </div>
    </footer>

    <script>
        let carrito = {};
        let sumaTotal = 0;

        function guardarDatos() {
            const n = document.getElementById('nombre').value;
            const d = document.getElementById('direccion').value;
            const c = document.getElementById('correo').value;
            if(n && d && c) {
                document.getElementById('inputs-datos').classList.add('hidden-section');
                document.getElementById('vista-fija').classList.remove('hidden-section');
                document.getElementById('btn-editar').classList.remove('hidden');
                document.getElementById('resumen-cliente').innerText = `Enviando a: ${n} | ${d}`;
            } else { alert("Por favor completa Nombre, Direcci√≥n y Correo."); }
        }

        function habilitarEdicion() {
            document.getElementById('inputs-datos').classList.remove('hidden-section');
            document.getElementById('vista-fija').classList.add('hidden-section');
            document.getElementById('btn-editar').classList.add('hidden');
        }

        function sumarAlCarrito(nombre, precio, idBadge) {
            if (!carrito[nombre]) {
                carrito[nombre] = { cantidad: 1, precio: precio };
            } else {
                carrito[nombre].cantidad += 1;
            }
            const badge = document.getElementById(idBadge);
            badge.innerText = carrito[nombre].cantidad;
            badge.classList.remove('hidden');
            sumaTotal += precio;
            document.getElementById('total').innerText = '$' + sumaTotal.toLocaleString('es-CO');
        }

        function generarPedido() {
            const nombre = document.getElementById('nombre').value;
            const direccion = document.getElementById('direccion').value;
            const correo = document.getElementById('correo').value;
            const pago = document.getElementById('medio-pago').value;
            const obs = document.getElementById('observaciones').value;

            if (!nombre || !direccion || Object.keys(carrito).length === 0) {
                alert("Verifica tus datos y que hayas seleccionado productos.");
                return;
            }

            let detalle = "";
            for (const p in carrito) {
                detalle += `‚úÖ ${carrito[p].cantidad}x ${p}\n`;
            }

            const mensaje = `*PEDIDO GRAN RAFA - EL PARGO ROJO*\n\n` +
                            `üë§ *Cliente:* ${nombre}\n` +
                            `üìç *Direcci√≥n:* ${direccion}\n` +
                            `üìß *Correo:* ${correo}\n` +
                            `üí≥ *Pago:* ${pago}\n\n` +
                            `üçΩÔ∏è *DETALLE DEL PEDIDO:* \n${detalle}\n` +
                            `üí∞ *TOTAL NETO:* $${sumaTotal.toLocaleString('es-CO')}\n` +
                            `üìù *Nota:* ${obs}\n\n` +
                            `_Orden generada por Vibras Positivas_`;

            const url = `https://api.whatsapp.com/send?phone=573207848287&text=${encodeURIComponent(mensaje)}`;
            window.open(url, '_blank');
        }
    </script>
</body>
</html>
